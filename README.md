# Проект Django REST framework

### Описание

Проект, реализованный при помощи Django REST framework.


#### **Функционал**
- У авторизованных пользователей есть возможность создавать приватные и публичные дневники.
- Создавать, редактировать и удалять записи в собственных дневниках.
- Читать чужие дневники и записи.

Сервис отслеживает актуальность дневников, и автоматические, каждые 10 минут, осуществляет удаление устаревших дневников и записей в них.

-------------
### Развёртывание проекта
Для развёртывание проекта в докер контейнерах, необходимо выполнить команду:

	docker compose up -d

При этом будет развёрнуто 5 контейнеров:

	api - Контейнер с backend составляющей проекта, реализованной про помощи Django 3.2 , Django-REST-Framework
	db - Контейнер с БД PostgreSQL.
	celery-worker - Контейнер с запущенным Celery воркером,  с зарегестрированной задачей на поддержание актуальности записей и дневников.
	celery-beat - Контейнер, с запущенным Celery beat, следит за исполнением расписания по актуализации дневников.
	redis - Контейнер с Redis, брокер для Celery
    nginx - Контейнер с nginx

После развёртывания, сервис будет доступен по адресу http://127.0.0.1

### Описание Урлов и Методов для взаимодействия с API

`api/token/`
- GET - Получение JWT токена пользователем

`api/v1/user/create-user`
- POST - Создание нового пользователя.

`api/v1/profile/<uuid:user_id>/`
- GET - Получение информации о пользователе и его публичных дневниках, с указанием uuid пользователя.

`api/v1/user/<uuid:user_id>/diaries`
- GET - Получение публичных дневников другого пользователя, с указанием uuid пользователя

`api/v1/diaries`
- GET получение всех публичных дневников, опубликованных на портале
- POST создание дневника

`api/v1/diaries/<uuid:diary_id>`
- GET получение публичного дневника, с указанием uuid дневника
- PATCH изменение дневника, с указанием uuid дневника
- DELETE удаление дневника, с указанием uuid дневника

`api/v1/diaries/<uuid:diary_id>/notes/`
- GET получение всех записей публичного дневника, с указанием uuid дневника
- POST создание записи в дневнике, с указанием uuid дневника

`api/v1/diaries/<uuid:diary_id>/notes/<uuid:note_id>`
- GET получение записи в дневнике, с указанием uuid дневника и uuid записи
- PATCH изменение записи в дневнике, с указанием uuid дневника и uuid записи
- DELETE удаление записи в дневнике, с указанием uuid дневника и uuid записи

### Тестирование проекта

В проекте реализованы unit-тесты, для запуска их необходимо:

Подключится к docker контейнеру с django:
`docker exec -it django bash`

Запустить тесты:
`python manage.py test`

### Документация

Документация доступна по адресу 
http://127.0.0.1/api/v1/docs

